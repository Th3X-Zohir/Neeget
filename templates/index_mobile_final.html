{% extends "base.html" %}

{% block title %}Neeget - Find the Right Service, Instantly{% endblock %}
{% block mobile_title %}Home{% endblock %}

{% block content %}
<!-- Mobile Hero Section -->
<section class="md-p-md">
    <!-- Search Bar -->
    <div class="md-search-bar md-mb-lg">
        <i class="fas fa-search md-search-icon"></i>
        <input type="text" class="md-search-input" placeholder="What service do you need?" id="mobileHeroSearch">
    </div>
    
    <!-- Quick Actions - Service Categories -->
    <div class="md-category-grid md-mb-lg">
        <a href="{{ url_for('services.browse') }}?category=home" class="md-category-card">
            <div class="md-category-icon">
                <i class="fas fa-home"></i>
            </div>
            <div class="md-category-title">Home Services</div>
            <div class="md-category-subtitle">Cleaning, repairs</div>
        </a>
        
        <a href="{{ url_for('services.browse') }}?category=tech" class="md-category-card">
            <div class="md-category-icon">
                <i class="fas fa-laptop-code"></i>
            </div>
            <div class="md-category-title">Tech Services</div>
            <div class="md-category-subtitle">IT support, web dev</div>
        </a>
        
        <a href="{{ url_for('services.browse') }}?category=creative" class="md-category-card">
            <div class="md-category-icon">
                <i class="fas fa-paint-brush"></i>
            </div>
            <div class="md-category-title">Creative</div>
            <div class="md-category-subtitle">Design, photography</div>
        </a>
        
        <a href="{{ url_for('services.browse') }}?category=education" class="md-category-card">
            <div class="md-category-icon">
                <i class="fas fa-graduation-cap"></i>
            </div>
            <div class="md-category-title">Education</div>
            <div class="md-category-subtitle">Tutoring, training</div>
        </a>
    </div>
</section>

<!-- Recent Activity Section -->
{% if g.user %}
<section class="md-p-md">
    <h3 class="md-mb-md" style="font-family: var(--md-font-display); font-size: 18px; font-weight: 600;">Recent Activity</h3>
    
    <div class="md-card md-mb-md">
        <div class="md-card-content">
            <div class="md-flex" style="align-items: center; gap: 16px;">
                <div class="md-service-card-icon">
                    <i class="fas fa-broom"></i>
                </div>
                <div class="md-flex-1">
                    <div class="md-service-card-title">House Cleaning</div>
                    <div class="md-service-card-subtitle">Booked for Tuesday, April 23</div>
                    <div class="md-service-card-meta">
                        <span class="md-badge md-badge-success">
                            <i class="fas fa-check"></i> Confirmed
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <a href="{{ url_for('bookings.list_bookings') }}" class="md-button md-button-text md-w-full md-text-center">
        View All Bookings
    </a>
</section>
{% endif %}

<!-- Popular Services Section -->
<section class="md-p-md">
    <h3 class="md-mb-md" style="font-family: var(--md-font-display); font-size: 18px; font-weight: 600;">Popular Services</h3>
    
    <a href="#" class="md-service-card">
        <div class="md-service-card-content">
            <div class="md-service-card-icon">
                <i class="fas fa-broom"></i>
            </div>
            <div class="md-service-card-info">
                <div class="md-service-card-title">House Cleaning</div>
                <div class="md-service-card-subtitle">John Doe</div>
                <div class="md-service-card-meta">
                    <div class="md-service-card-rating">
                        <i class="fas fa-star"></i>
                        <span>4.8 (360)</span>
                    </div>
                    <div class="md-service-card-price">$50</div>
                </div>
            </div>
        </div>
    </a>
    
    <a href="#" class="md-service-card">
        <div class="md-service-card-content">
            <div class="md-service-card-icon">
                <i class="fas fa-laptop"></i>
            </div>
            <div class="md-service-card-info">
                <div class="md-service-card-title">PC Repair</div>
                <div class="md-service-card-subtitle">TechFix</div>
                <div class="md-service-card-meta">
                    <div class="md-service-card-rating">
                        <i class="fas fa-star"></i>
                        <span>4.9 (120)</span>
                    </div>
                    <div class="md-service-card-price">$70</div>
                </div>
            </div>
        </div>
    </a>
    
    <a href="#" class="md-service-card">
        <div class="md-service-card-content">
            <div class="md-service-card-icon">
                <i class="fas fa-paint-brush"></i>
            </div>
            <div class="md-service-card-info">
                <div class="md-service-card-title">Graphic Design</div>
                <div class="md-service-card-subtitle">Creative Go</div>
                <div class="md-service-card-meta">
                    <div class="md-service-card-rating">
                        <i class="fas fa-star"></i>
                        <span>4.7 (85)</span>
                    </div>
                    <div class="md-service-card-price">$120</div>
                </div>
            </div>
        </div>
    </a>
    
    <a href="{{ url_for('services.browse') }}" class="md-button md-button-outlined md-w-full md-text-center md-mt-md">
        <i class="fas fa-th-large"></i> Browse All Services
    </a>
</section>

<!-- For Non-logged Users -->
{% if not g.user %}
<section class="md-p-md">
    <div class="md-card" style="background: linear-gradient(135deg, var(--md-primary) 0%, #0056b3 100%); color: var(--md-on-primary);">
        <div class="md-card-content md-text-center">
            <h3 class="md-mb-sm" style="color: var(--md-on-primary); font-family: var(--md-font-display);">Join Neeget Today</h3>
            <p class="md-mb-md" style="color: rgba(255, 255, 255, 0.9);">Connect with verified service providers in your area</p>
            <div class="md-flex" style="gap: 12px; flex-direction: column;">
                <a href="{{ url_for('auth.register') }}" class="md-button md-button-filled" style="background: var(--md-on-primary); color: var(--md-primary);">
                    <i class="fas fa-user-plus"></i> Sign Up
                </a>
                <a href="{{ url_for('auth.login') }}" class="md-button md-button-outlined" style="border-color: var(--md-on-primary); color: var(--md-on-primary);">
                    <i class="fas fa-sign-in-alt"></i> Login
                </a>
            </div>
        </div>
    </div>
</section>
{% endif %}

<!-- Floating Action Button -->
{% if g.user and g.user.role == 'service_provider' %}
<button class="md-fab" id="addServiceFAB">
    <i class="fas fa-plus"></i>
</button>
{% elif g.user %}
<button class="md-fab" id="quickBookFAB">
    <i class="fas fa-search"></i>
</button>
{% endif %}
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Mobile hero search functionality
    const mobileHeroSearch = document.getElementById('mobileHeroSearch');
    if (mobileHeroSearch) {
        mobileHeroSearch.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                const query = this.value.trim();
                if (query) {
                    window.location.href = `{{ url_for('services.browse') }}?search=${encodeURIComponent(query)}`;
                }
            }
        });
    }
    
    // FAB functionality
    const addServiceFAB = document.getElementById('addServiceFAB');
    const quickBookFAB = document.getElementById('quickBookFAB');
    
    if (addServiceFAB) {
        addServiceFAB.addEventListener('click', function() {
            window.location.href = '{{ url_for("services.add") if "services.add" in url_for.__globals__ else "#" }}';
        });
    }
    
    if (quickBookFAB) {
        quickBookFAB.addEventListener('click', function() {
            window.location.href = '{{ url_for("services.browse") }}';
        });
    }
    
    // Add staggered animation to service cards
    const serviceCards = document.querySelectorAll('.md-service-card');
    serviceCards.forEach((card, index) => {
        card.style.animationDelay = `${index * 0.1}s`;
        card.classList.add('md-fade-in');
    });
    
    // Add staggered animation to category cards
    const categoryCards = document.querySelectorAll('.md-category-card');
    categoryCards.forEach((card, index) => {
        card.style.animationDelay = `${index * 0.05}s`;
        card.classList.add('md-fade-in');
    });
});
</script>
{% endblock %}

